<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <form>
      <label for="points">Points:</label>
      <input type="number" id="points" name="points" />
      <a href="#" type="submit" id="generate">generate code</a>
    </form>

    <div id="qrcode"></div>
    <script
      type="text/javascript"
      src="assets/js/qrcodejs/qrcode.min.js"
    ></script>
    <script type="text/javascript" src="assets/js/main.js"></script>
    <script>
      if (elementByIdExist("generate")) {
        document.getElementById("generate").onclick = function (e) {
          e.preventDefault();
          generate();
        };
      }

      function generate(){
          let points = getFormValue("points");

          const formData = new FormData();
      formData.append("points", points);

      postDataWithToken(
        "http://localloyal.test/api/code",
        "Bearer " + getTokenFromCookie(),
        formData,
        (res) => logger(res)
      );
      }

      

      function logger(res) {
        console.log(res);
        new QRCode(document.getElementById("qrcode"), res.success.code);
      }
    </script>
  </body>
</html>
